# Contributor: Isaac Praveen <icylisper@gmail.com>
pkgname=clin
pkgver=20100910
pkgrel=1
pkgdesc="Program to run the JVM as a daemon"
arch=('i686' 'x86_64')
license=('APACHE')
depends=('')
makedepends=('git' 'maven') 
source=()

_gitroot="git://github.com/icylisper/clin.git"
_gitname="clin"

build() {
    cd ${srcdir}/
    msg "Connecting to the GIT server...."

    if [[ -d ${srcdir}/${_gitname} ]] ; then
        cd ${_gitname}
        git pull origin
        msg "The local files are updated..."
    else
        git clone ${_gitroot}
    fi
    
    mkdir -p ${srcdir}/${_gitname}/lib/
    cd ${srcdir}/${_gitname}/lib/
    wget http://build.clojure.org/releases/org/clojure/clojure/1.2.0/clojure-1.2.0.jar

    wget http://build.clojure.org/releases/org/clojure/clojure-contrib/1.2.0/clojure-contrib-1.2.0.jar

    wget http://stuartsierra.com/maven2/com/stuartsierra/classpath-manager/1.1.0/classpath-manager-1.1.0.jar

    wget http://clojars.org/repo/swank-clojure/swank-clojure/1.3.0-SNAPSHOT/swank-clojure-1.3.0-20100502.112537-8.jar
    
    cd ${srcdir}/${_gitname}

    lein jar
        
    ./build
    ./clin install
}

